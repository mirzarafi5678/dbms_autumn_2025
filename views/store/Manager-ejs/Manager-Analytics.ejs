<%- include('../../partials/head') %>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 min-h-screen text-white">

<%- include('../../partials/manager-nav') %>


<%- include('../../partials/head') %>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 min-h-screen text-white">

<%- include('../../partials/manager-nav') %>

<main class="p-8">
  <div class="max-w-5xl mx-auto space-y-10">
    <h1 class="text-2xl font-semibold mb-6">Analytics Dashboard</h1>

    <!-- Chart 1: Stock Total Shares -->
    <div class="bg-slate-800 p-6 rounded-xl shadow-lg">
      <h2 class="text-xl font-medium mb-4">Total Shares per Company</h2>
      <canvas id="stockSharesChart"></canvas>
    </div>

    <!-- Chart 2: Stock Price History -->
    <div class="bg-slate-800 p-6 rounded-xl shadow-lg">
      <h2 class="text-xl font-medium mb-4">Stock Price History</h2>
      <canvas id="priceHistoryChart"></canvas>
    </div>
  </div>
</main>

<script>
  // --- Chart 1: Total Shares per Company ---
  const stockLabels = <%- JSON.stringify(StockList.map(stock => stock.companyId)) %>;
  const stockData = <%- JSON.stringify(StockList.map(stock => stock.totalShare)) %>;

  const ctx1 = document.getElementById('stockSharesChart').getContext('2d');
  new Chart(ctx1, {
    type: 'bar',
    data: {
      labels: stockLabels,
      datasets: [{
        label: 'Total Shares',
        data: stockData,
        backgroundColor: 'rgba(59, 130, 246, 0.7)',
        borderColor: 'rgba(59, 130, 246, 1)',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false },
        title: { display: true, text: 'Total Shares per Company', color: '#fff' }
      },
      scales: {
        x: { ticks: { color: '#fff' }, grid: { color: 'rgba(255,255,255,0.1)' } },
        y: { ticks: { color: '#fff' }, grid: { color: 'rgba(255,255,255,0.1)' } }
      }
    }
  });

  // --- Chart 2: Stock Price History ---
  const priceLabels = <%- JSON.stringify(PriceList.map(p => p.date)) %>;
  const openPrices = <%- JSON.stringify(PriceList.map(p => p.open)) %>;
  const closePrices = <%- JSON.stringify(PriceList.map(p => p.close)) %>;

  const ctx2 = document.getElementById('priceHistoryChart').getContext('2d');
  new Chart(ctx2, {
    type: 'line',
    data: {
      labels: priceLabels,
      datasets: [
        {
          label: 'Open Price',
          data: openPrices,
          borderColor: 'rgba(34,197,94,1)',
          backgroundColor: 'rgba(34,197,94,0.2)',
          fill: true,
          tension: 0.3
        },
        {
          label: 'Close Price',
          data: closePrices,
          borderColor: 'rgba(239,68,68,1)',
          backgroundColor: 'rgba(239,68,68,0.2)',
          fill: true,
          tension: 0.3
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        title: { display: true, text: 'Stock Price History', color: '#fff' },
        legend: { labels: { color: '#fff' } }
      },
      scales: {
        x: { ticks: { color: '#fff' }, grid: { color: 'rgba(255,255,255,0.1)' } },
        y: { ticks: { color: '#fff' }, grid: { color: 'rgba(255,255,255,0.1)' } }
      }
    }
  });
</script>

</body>
</html>


  
</body>
</html>